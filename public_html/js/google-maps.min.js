function initMap(){var e=new google.maps.StyledMapType([{featureType:"administrative",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{color:"#bfbfbf"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#ebebeb"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"simplified"},{color:"#006699"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}]),a="custom_style",t=new google.maps.Map(document.getElementById("map"),{zoom:4,center:{lat:48.76034594263708,lng:8.609468946875056},zoom:5,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1});t.mapTypes.set(a,e),t.setMapTypeId(a);var r=new google.maps.InfoWindow;libraries.map((function(e){var a="<h3>"+e.library+"</h3><p>"+e.city+", "+e.nation+"</p><p>No. of objects: "+e.quantity+'</p><hr><div class="d-grid gap-2"><a class="btn btn-success" href="'+e.website+'" target="_blank"><i class="bi-link"></i> Go to the digitized manuscripts <sup><i class="bi-box-arrow-up-right small"></i></sup></a><a class="btn btn-primary" href="'+e.library_name_slug+'" target="_blank"><i class="bi-search-plus"></i> Explore additional data</a></div><div><hr><p><a href="https://docs.google.com/forms/d/e/1FAIpQLSfYd3J_nTxiF82Nvm2i7YBhRfbP9mO6cxffSLF5nmgCK5PQ8g/viewform?entry.2011995917='+e.library+"&entry.1561016982="+e.website+'" class="badge bg-danger" target="_blank"> report broken link</a></p></div>',s=new google.maps.Marker({position:{lat:parseFloat(e.lat),lng:parseFloat(e.lng)},map:t,data:e.Library});s.addListener("click",(function(){t.setCenter({lat:parseFloat(e.lat),lng:parseFloat(e.lng)}),r.setContent(a),r.open(t,s)}))})),$((function(){var e=$("#dmmtable").DataTable({data:libraries,columns:[{data:"library"},{data:"iiif"},{data:"quantity"},{data:"copyright"},{data:"is_free_cultural_works_license"},{data:"nation"},{data:"city"},{data:"lat"},{data:"lng"},{data:"notes"},{data:"website"},{data:"has_post"},{data:"post_url"},{data:"library_name_slug"}],responsive:{details:!1},searchPanes:!0,searchPanes:{threshold:1},columnDefs:[{targets:[3,5,6,7,8,9,10,11,12,13],visible:!1},{targets:[1,3,7,8,9,10,11,12,13],searchable:!1},{responsivePriority:1,targets:0},{responsivePriority:2,targets:2},{searchPanes:{show:!1},targets:[1,3,5,6,7,8,9,10,11,12,13]},{targets:[1,4],render:function(e){return 1===e?"<p style='display:none'>yes</p><i class='bi-2x fa-check-circle text-success'></i>":"<p style='display:none'>no</p><i class='bi-2x fa-times-circle text-danger'></i>"}},{targets:[0],searchPanes:{viewCount:!1}}],fnInitComplete:function(){$("#spinner").hide()}});e.searchPanes.container().prependTo(e.table().container()),e.searchPanes.resizePanes(),$("#dmmtable tbody").on("click","tr",(function(){var a=e.row(this).data(),s="<h3>"+a.library+"</h3><p>"+a.city+", "+a.nation+"</p><p>No. of objects: "+a.quantity+'</p><hr><div class="d-grid gap-2"><a class="btn btn-success" href="'+a.website+'" target="_blank"><i class="bi-link"></i> Go to the digitized manuscripts <sup><i class="bi-box-arrow-up-right small"></i></sup></a><a class="btn btn-primary" href="'+a.library_name_slug+'" target="_blank"><i class="bi-search-plus"></i> Explore additional data</a></div><div><hr><p><a href="https://docs.google.com/forms/d/e/1FAIpQLSfYd3J_nTxiF82Nvm2i7YBhRfbP9mO6cxffSLF5nmgCK5PQ8g/viewform?entry.2011995917='+a.library+"&entry.1561016982="+a.website+'" class="badge bg-danger" target="_blank"> report broken link</a></p></div>',l=new google.maps.Marker({position:{lat:parseFloat(a.lat),lng:parseFloat(a.lng)},map:t,data:a.Library});t.setCenter({lat:parseFloat(a.lat),lng:parseFloat(a.lng)}),t.setZoom(12),r.setContent(s),r.open(t,l),$("html, body").animate({scrollTop:$("#lead").offset().top},500)}))}))}$.fn.DataTable.ext.type.search.string=function(e){return e?"string"==typeof e?e.replace(/[áÁàÀâÂäÄãÃåÅæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[éÉèÈêÊëË]/g,"e").replace(/[íÍìÌîÎïÏîĩĨĬĭ]/g,"i").replace(/[ñÑ]/g,"n").replace(/[óÓòÒôÔöÖœŒ]/g,"o").replace(/[ß]/g,"s").replace(/[úÚùÙûÛüÜ]/g,"u").replace(/[ýÝŷŶŸÿ]/g,"n"):e:""};
